{% extends 'slowsearch/base.html' %}
{% load static %}


{% block body_block %}

<script type="text/javascript">
    function showThrobber() {
         document.getElementById('progress').style.visibility='visible';
         document.getElementById('results').style.opacity='0.5';
         setTimeout("document.getElementById('progress').style.visibility='hidden'", 5000);
         setTimeout("document.getElementById('results').style.opacity='1'", 5000);
    }
</script>

      <div class="modal" id="progress" style="visibility: hidden">
                 <img src="{% static "throbber.GIF" %}" alt="Progress Spinner" height="45" width="45"/>
            </div>

    <div id="results">

            <form id="search" action="/slowsearch/search/" method="post">
                {% csrf_token %}
                <input type=text name=query value="{{ query }}">
                {% if request.user.id != 1 %}
                     <input id="SearchDelay" type=submit value="Search" onclick="showThrobber()">
                {% else %}
                    <input type=submit value="Search">
                {% endif %}
            </form>

        {% if contacts %}
             {% for contact in contacts %}
                <strong><a href="/slowsearch/goto/{{ contact.url }}/{{ contact.rank }}">{{ contact.title }}</a></strong><br />
                <div style="font-size: smaller; color: green">{% if contact.url|length > 70 %}{{ contact.url|slice:"70" }}...
                {% else %}{{ contact.url }}{% endif %}</div>
                <em>{{ contact.summary }}</em>
                <br>
                <br>
             {% endfor %}

        {% endif %}
        <br>
        {% if contacts.has_previous %}
             <a href="?query={{ query }}&page={{ contacts.previous_page_number }}">previous</a>
        {% endif %}
             Page {{ contacts.number }} of {{ contacts.paginator.num_pages }}.

        {% if contacts.has_next %}
            <a href="?query={{ query }}&page={{ contacts.next_page_number }}">next</a><br>
        {% endif %}
    </div>

{% endblock %}