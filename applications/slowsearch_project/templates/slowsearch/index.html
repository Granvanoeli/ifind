{% extends 'slowsearch/base.html' %}
{% load static %}

{% block body_block %}
<script type="text/javascript">
    function showThrobber() {
         document.getElementById('progress').style.visibility='visible';
         document.getElementById('results').style.opacity='0.5';
         document.getElementById('results').style.pointerEvents="none";
         setTimeout("document.getElementById('progress').style.visibility='hidden'", 5000);
         setTimeout("document.getElementById('results').style.opacity='1'", 5000);
         setTimeout("document.getElementById('results').style.pointerEvents='auto'", 5000);
    }
</script>
        {% if user.is_authenticated %}
            <div class="modal" id="progress" style="visibility: hidden">
                <img src="{% static "throbber.GIF" %}" alt="Progress Spinner" height="45" width="45"/>
            </div>

            <div align="center" style="margin-top: 18%" id="results">
                    <h2>Welcome to WebSearch</h2><br>
                    <form id="search" action="/search/" method="post">
                        {% csrf_token %}

                        <input type=text class="longTextbox" name=query value="{{ query }}">
                        {% if not request.user.id|divisibleby:2 %}
                             <input class="btn-primary" style="vertical-align: top; height: 30px" id="SearchDelay" type=submit value="Search" onclick="showThrobber()">
                        {% else %}
                            <input class="btn-primary" style="vertical-align: top; height: 30px" type=submit value="Search">
                        {% endif %}
                    </form>
            </div>
        {% else %}
        <div style="width: 40%; float: left">
            Thank you for agreeing to participate in this experiment. <b>For the duration of the experimental period,
            please use this site in place of your go-to search engine</b>. All searches are <b>confidential</b> and data related
            to queries entered and websites visited <b>will not be recorded by this site</b> and is visible to nobody.
            <br>
            <br>
            The search engine functions like any other popular search engine. Before you begin searching, please
            create your account and fill in the optional short questionnaire.
            <br>
            <br>
            <strong>Please read the Study Information below and tick the boxes to agree to the terms
            of this study.</strong><br>
            <ul>
                <li> The application is intended to be used in place of your favourite
                search engine for the duration of the experiment.</li><br>
                <li>As part of the study you will be asked to complete some optional questionnaires regarding your
                demographics and experience with the application.</li><br>
                <li>The experiment will last for X days, beginning on X July, 2014.</li><br>
                <li>Participation in this study is voluntary, and <strong>you may withdraw consent to use the information you
                    provided at any time before the X of August, 2014.</strong></li><br>
                <li>Your name will not appear on any published document in relation to this study.</li>
                <li>The time you spend on each query will be recorded for purposes of this experiment. <strong>Your search
                    queries will be converted to hashes so that they cannot be read and will not be recorded, nor will any
                    URLs visited using this application.</strong></li><br>
                <li>An example of a hashed query is the query <strong>'test'</strong>, which would be hashed to
                    <strong>'a94a8fe5ccb19ba61c4c0873d391e987982fbbd3'</strong>
                before being recorded to render it unreadable to any individual. URLs visited are hashed in a similar way.</li><br>
                <li>You are able to ask questions at any time before, during or after the experiment using the contact
                details available on the <a target="_blank" href="slowsearch/about">About</a> page.</li>
        </div>

            <div class="inline">
            <div class="span2">
            <a class="btn btn-link" href="register.html">Register</a><br><br>
            <a class="btn btn-link" href="login.html">Login</a>
            </div>
            </div>
        {% endif %}

    {% endblock %}